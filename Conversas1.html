<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ConnectZap - Painel Principal</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  <style>
    /* Animações de fade */
    .fade-enter { opacity: 0; transform: translateY(10px); }
    .fade-enter-active { opacity: 1; transform: translateY(0); transition: all 0.3s ease-in-out; }
    .fade-exit { opacity: 1; transform: translateY(0); }
    .fade-exit-active { opacity: 0; transform: translateY(-10px); transition: all 0.3s ease-in-out; }

    /* Menu ativo com indicador animado */
    .menu-item { position: relative; transition: all 0.3s ease; }
    .menu-active::before {
      content: "";
      position: absolute;
      left: 0;
      top: 0;
      width: 4px;
      height: 100%;
      background-color: #2563eb; /* azul intenso */
      border-radius: 0 4px 4px 0;
      transition: top 0.3s;
    }

    /* Hover efeito moderno */
    .menu-item:hover { background-color: #1f2937; }

    /* Sidebar responsiva mobile */
    @media (max-width: 768px) {
      .sidebar {
        position: fixed;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 60px;
        display: flex;
        justify-content: space-around;
        background-color: #1e293b;
        z-index: 50;
      }
      .menu-item::before { display: none; } /* Indicador lateral apenas em desktop */
    }
  </style>
</head>
<body class="bg-gray-100 font-sans">

  <!-- Sidebar / Menu Lateral -->
  <aside class="sidebar w-64 bg-gray-900 text-white fixed h-full hidden md:flex flex-col">
    <div class="p-6 text-2xl font-bold text-center border-b border-gray-700">
      ConnectZap
    </div>
    <nav class="flex-1 mt-6">
      <ul id="menuList">
        <li><a href="#" data-page="index.html" class="menu-item flex items-center px-6 py-3"><i class="fas fa-home mr-3"></i> Principal</a></li>
        <li><a href="#" data-page="Envios_em_massa.html" class="menu-item flex items-center px-6 py-3"><i class="fas fa-paper-plane mr-3"></i> Envios em Massa</a></li>
        <li><a href="#" data-page="dashboard.html" class="menu-item flex items-center px-6 py-3"><i class="fas fa-chart-line mr-3"></i> Dashboard</a></li>
        <li><a href="#" data-page="Verificar_entregas.html" class="menu-item flex items-center px-6 py-3"><i class="fas fa-check-circle mr-3"></i> Verificar Entregas</a></li>
        <li><a href="#" data-page="Monitoria.html" class="menu-item flex items-center px-6 py-3"><i class="fas fa-eye mr-3"></i> Monitoria</a></li>
        <li><a href="#" data-page="Conversas.html" class="menu-item flex items-center px-6 py-3"><i class="fas fa-comments mr-3"></i> Conversas</a></li>
      </ul>
    </nav>
    <div class="p-6 border-t border-gray-700 text-sm">
      <a href="Politica_de_privacidade.html" target="_blank" class="block hover:underline">Política de Privacidade</a>
      <a href="Termos_de_Servico.html" target="_blank" class="block hover:underline">Termos de Serviço</a>
      <a href="Exclusao_de_dados.html" target="_blank" class="block hover:underline">Exclusão de Dados</a>
    </div>
  </aside>

  <!-- Área principal -->
  <div class="md:ml-64 p-6" id="mainContent">
    <!-- Conteúdo inicial -->
  </div>

  <script>
    const baseURL = 'https://joubertcastro.github.io/ConnectZap/';
    const mainContent = document.getElementById('mainContent');
    const menuLinks = document.querySelectorAll('#menuList a');

    function setActiveMenu(page) {
      menuLinks.forEach(link => {
        if (link.getAttribute('data-page') === page) {
          link.classList.add('menu-active');
        } else {
          link.classList.remove('menu-active');
        }
      });
    }

    async function loadPage(page) {
      setActiveMenu(page);

      // animação de saída
      mainContent.classList.add('fade-exit', 'fade-exit-active');

      setTimeout(async () => {
        try {
          const response = await fetch(baseURL + page);
          let html = await response.text();

          // Inserir apenas conteúdo do <body>
          const bodyContent = html.match(/<body[^>]*>((.|[\n\r])*)<\/body>/im);
          mainContent.innerHTML = bodyContent ? bodyContent[1] : html;

          // animação de entrada
          mainContent.classList.remove('fade-exit', 'fade-exit-active');
          mainContent.classList.add('fade-enter');
          setTimeout(() => mainContent.classList.add('fade-enter-active'), 10);
          setTimeout(() => mainContent.classList.remove('fade-enter', 'fade-enter-active'), 310);
        } catch (err) {
          mainContent.innerHTML = '<p class="text-red-500">Erro ao carregar a página.</p>';
          console.error(err);
        }
      }, 300);
    }

    menuLinks.forEach(link => {
      link.addEventListener('click', e => {
        e.preventDefault();
        const page = link.getAttribute('data-page');
        loadPage(page);
      });
    });

    // Carregar página inicial
    loadPage('index.html');
  </script>
</body>
</html>
